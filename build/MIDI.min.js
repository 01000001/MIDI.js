if(MIDI===void 0)var MIDI={};if(function(){"use strict";var e={},n=0,t=function(t){n++;var r=new Audio,o=t.split(";")[0];r.id="audio",r.setAttribute("preload","auto"),r.setAttribute("audiobuffer",!0),r.addEventListener("error",function(){e[o]=!1,n--},!1),r.addEventListener("canplaythrough",function(){e[o]=!0,n--},!1),r.src="data:"+t,document.body.appendChild(r)};MIDI.audioDetect=function(r){if(navigator.requestMIDIAccess){var o=Function.prototype.toString.call(navigator.requestMIDIAccess).indexOf("[native code]");if(o)e.webmidi=!0;else for(var a=0;navigator.plugins.length>a;a++){var i=navigator.plugins[a];i.name.indexOf("Jazz-Plugin")>=0&&(e.webmidi=!0)}}if("undefined"==typeof Audio)return r({});e.audiotag=!0,(window.AudioContext||window.webkitAudioContext)&&(e.webaudio=!0);var u=new Audio;if(u.canPlayType===void 0)return r(e);var s=u.canPlayType('audio/ogg; codecs="vorbis"');s="probably"===s||"maybe"===s;var c=u.canPlayType("audio/mpeg");if(c="probably"===c||"maybe"===c,!s&&!c)return r(e),void 0;s&&t("audio/ogg;base64,T2dnUwACAAAAAAAAAADqnjMlAAAAAOyyzPIBHgF2b3JiaXMAAAAAAUAfAABAHwAAQB8AAEAfAACZAU9nZ1MAAAAAAAAAAAAA6p4zJQEAAAANJGeqCj3//////////5ADdm9yYmlzLQAAAFhpcGguT3JnIGxpYlZvcmJpcyBJIDIwMTAxMTAxIChTY2hhdWZlbnVnZ2V0KQAAAAABBXZvcmJpcw9CQ1YBAAABAAxSFCElGVNKYwiVUlIpBR1jUFtHHWPUOUYhZBBTiEkZpXtPKpVYSsgRUlgpRR1TTFNJlVKWKUUdYxRTSCFT1jFloXMUS4ZJCSVsTa50FkvomWOWMUYdY85aSp1j1jFFHWNSUkmhcxg6ZiVkFDpGxehifDA6laJCKL7H3lLpLYWKW4q91xpT6y2EGEtpwQhhc+211dxKasUYY4wxxsXiUyiC0JBVAAABAABABAFCQ1YBAAoAAMJQDEVRgNCQVQBABgCAABRFcRTHcRxHkiTLAkJDVgEAQAAAAgAAKI7hKJIjSZJkWZZlWZameZaouaov+64u667t6roOhIasBACAAAAYRqF1TCqDEEPKQ4QUY9AzoxBDDEzGHGNONKQMMogzxZAyiFssLqgQBKEhKwKAKAAAwBjEGGIMOeekZFIi55iUTkoDnaPUUcoolRRLjBmlEluJMYLOUeooZZRCjKXFjFKJscRUAABAgAMAQICFUGjIigAgCgCAMAYphZRCjCnmFHOIMeUcgwwxxiBkzinoGJNOSuWck85JiRhjzjEHlXNOSuekctBJyaQTAAAQ4AAAEGAhFBqyIgCIEwAwSJKmWZomipamiaJniqrqiaKqWp5nmp5pqqpnmqpqqqrrmqrqypbnmaZnmqrqmaaqiqbquqaquq6nqrZsuqoum65q267s+rZru77uqapsm6or66bqyrrqyrbuurbtS56nqqKquq5nqq6ruq5uq65r25pqyq6purJtuq4tu7Js664s67pmqq5suqotm64s667s2rYqy7ovuq5uq7Ks+6os+75s67ru2rrwi65r66os674qy74x27bwy7ouHJMnqqqnqq7rmarrqq5r26rr2rqmmq5suq4tm6or26os67Yry7aumaosm64r26bryrIqy77vyrJui67r66Ys67oqy8Lu6roxzLat+6Lr6roqy7qvyrKuu7ru+7JuC7umqrpuyrKvm7Ks+7auC8us27oxuq7vq7It/KosC7+u+8Iy6z5jdF1fV21ZGFbZ9n3d95Vj1nVhWW1b+V1bZ7y+bgy7bvzKrQvLstq2scy6rSyvrxvDLux8W/iVmqratum6um7Ksq/Lui60dd1XRtf1fdW2fV+VZd+3hV9pG8OwjK6r+6os68Jry8ov67qw7MIvLKttK7+r68ow27qw3L6wLL/uC8uq277v6rrStXVluX2fsSu38QsAABhwAAAIMKEMFBqyIgCIEwBAEHIOKQahYgpCCKGkEEIqFWNSMuakZM5JKaWUFEpJrWJMSuaclMwxKaGUlkopqYRSWiqlxBRKaS2l1mJKqcVQSmulpNZKSa2llGJMrcUYMSYlc05K5pyUklJrJZXWMucoZQ5K6iCklEoqraTUYuacpA46Kx2E1EoqMZWUYgupxFZKaq2kFGMrMdXUWo4hpRhLSrGVlFptMdXWWqs1YkxK5pyUzDkqJaXWSiqtZc5J6iC01DkoqaTUYiopxco5SR2ElDLIqJSUWiupxBJSia20FGMpqcXUYq4pxRZDSS2WlFosqcTWYoy1tVRTJ6XFklKMJZUYW6y5ttZqDKXEVkqLsaSUW2sx1xZjjqGkFksrsZWUWmy15dhayzW1VGNKrdYWY40x5ZRrrT2n1mJNMdXaWqy51ZZbzLXnTkprpZQWS0oxttZijTHmHEppraQUWykpxtZara3FXEMpsZXSWiypxNhirLXFVmNqrcYWW62ltVprrb3GVlsurdXcYqw9tZRrrLXmWFNtBQAADDgAAASYUAYKDVkJAEQBAADGMMYYhEYpx5yT0ijlnHNSKucghJBS5hyEEFLKnINQSkuZcxBKSSmUklJqrYVSUmqttQIAAAocAAACbNCUWByg0JCVAEAqAIDBcTRNFFXVdX1fsSxRVFXXlW3jVyxNFFVVdm1b+DVRVFXXtW3bFn5NFFVVdmXZtoWiqrqybduybgvDqKqua9uybeuorqvbuq3bui9UXVmWbVu3dR3XtnXd9nVd+Bmzbeu2buu+8CMMR9/4IeTj+3RCCAAAT3AAACqwYXWEk6KxwEJDVgIAGQAAgDFKGYUYM0gxphhjTDHGmAAAgAEHAIAAE8pAoSErAoAoAADAOeecc84555xzzjnnnHPOOeecc44xxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY0wAwE6EA8BOhIVQaMhKACAcAABACCEpKaWUUkoRU85BSSmllFKqFIOMSkoppZRSpBR1lFJKKaWUIqWgpJJSSimllElJKaWUUkoppYw6SimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaVUSimllFJKKaWUUkoppRQAYPLgAACVYOMMK0lnhaPBhYasBAByAwAAhRiDEEJpraRUUkolVc5BKCWUlEpKKZWUUqqYgxBKKqmlklJKKbXSQSihlFBKKSWUUkooJYQQSgmhlFRCK6mEUkoHoYQSQimhhFRKKSWUzkEoIYUOQkmllNRCSB10VFIpIZVSSiklpZQ6CKGUklJLLZVSWkqpdBJSKamV1FJqqbWSUgmhpFZKSSWl0lpJJbUSSkklpZRSSymFVFJJJYSSUioltZZaSqm11lJIqZWUUkqppdRSSiWlkEpKqZSSUmollZRSaiGVlEpJKaTUSimlpFRCSamlUlpKLbWUSkmptFRSSaWUlEpJKaVSSksppRJKSqmllFpJKYWSUkoplZJSSyW1VEoKJaWUUkmptJRSSymVklIBAEAHDgAAAUZUWoidZlx5BI4oZJiAAgAAQABAgAkgMEBQMApBgDACAQAAAADAAAAfAABHARAR0ZzBAUKCwgJDg8MDAAAAAAAAAAAAAACAT2dnUwAEAAAAAAAAAADqnjMlAgAAADzQPmcBAQA="),c&&t("audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq");var l=(new Date).getTime(),d=window.setInterval(function(){var t=(new Date).getTime(),o=t-l>5e3;(!n||o)&&(window.clearInterval(d),r(e))},1)}}(),MIDI===void 0)var MIDI={};if(MIDI.Player===void 0&&(MIDI.Player={}),function(){"use strict";var e=MIDI.Player;e.callback=void 0,e.currentTime=0,e.endTime=0,e.restart=0,e.playing=!1,e.timeWarp=1,e.startDelay=0,e.BPM=120,e.start=e.resume=function(n){-1>e.currentTime&&(e.currentTime=-1),d(e.currentTime,null,n)},e.pause=function(){var n=e.restart;f(),e.restart=n},e.stop=function(){f(),e.restart=0,e.currentTime=0},e.addListener=function(e){i=e},e.removeListener=function(){i=void 0},e.clearAnimation=function(){e.interval&&window.clearInterval(e.interval)},e.setAnimation=function(n){var t="function"==typeof n?n:n.callback,r=n.interval||30,o=0,i=0,u=0;e.clearAnimation(),e.interval=setInterval(function(){if(0!==e.endTime){e.playing?(o=u===e.currentTime?i-(new Date).getTime():0,o=0===e.currentTime?0:e.currentTime-o,u!==e.currentTime&&(i=(new Date).getTime(),u=e.currentTime)):o=e.currentTime;var n=e.endTime,r=o/1e3,s=r/60,c=r-60*s,l=60*s+c,d=n/1e3;-1>d-l||t({now:l,end:d,events:a})}},r)},e.loadMidiFile=function(n){e.replayer=new Replayer(MidiFile(e.currentData),e.timeWarp,null,e.BPM),e.data=e.replayer.getData(),e.endTime=c(),MIDI.loadPlugin({instruments:e.getFileInstruments(),callback:n})},e.loadFile=function(n,t){if(e.stop(),-1!==n.indexOf("base64,")){var r=window.atob(n.split(",")[1]);return e.currentData=r,e.loadMidiFile(t),void 0}var o=new XMLHttpRequest;o.open("GET",n),o.overrideMimeType("text/plain; charset=x-user-defined"),o.onreadystatechange=function(){if(4===this.readyState&&200===this.status){for(var n=this.responseText||"",r=[],o=n.length,a=String.fromCharCode,i=0;o>i;i++)r[i]=a(255&n.charCodeAt(i));var u=r.join("");e.currentData=u,e.loadMidiFile(t)}},o.send()},e.getFileInstruments=function(){for(var n={},t={},r=0;e.data.length>r;r++){var o=e.data[r][0].event;if("channel"===o.type){var a=o.channel;switch(o.subtype){case"controller":break;case"programChange":t[a]=o.programNumber;break;case"noteOn":var i=t[a],u=MIDI.GM.byId[isFinite(i)?i:a];n[u.id]=!0}}}var s=[];for(var c in n)s.push(c);return s};var n,t,r=[],o=0,a={},i=void 0,u=function(t,o,u,s,c,l){return setTimeout(function(){var s={channel:t,note:o,now:u,end:e.endTime,message:c,velocity:l};128===c?delete a[o]:a[o]=s,i&&i(s),e.currentTime=u,r.shift(),1e3>r.length?d(n,!0):e.currentTime===n&&e.endTime>n&&d(n,!0)},u-s)},s=function(){return"WebAudioAPI"===MIDI.lang?MIDI.Player.ctx:(e.ctx||(e.ctx={currentTime:0}),e.ctx)},c=function(){for(var n=e.data,t=n.length,r=.5,o=0;t>o;o++)r+=n[o][1];return r},l=function(){return window.performance&&window.performance.now?window.performance.now():Date.now()},d=function(a,i,d){if(e.replayer){i||(a===void 0&&(a=e.restart),e.playing&&f(),e.playing=!0,e.data=e.replayer.getData(),e.endTime=c());var p,A=0,h=0,m=e.data,I=s(),g=m.length;n=.5,r[0]&&r[0].interval||0;var v=a-e.currentTime;if("webaudio"!==MIDI.api){var y=l();t=t||y,I.currentTime=(y-t)/1e3}o=I.currentTime;for(var q=0;g>q&&100>h;q++){var M=m[q][1];if(a>=(n+=M))A=n;else{a=n-A;var S=m[q][0].event;if("channel"===S.type){var b=S.channel,D=MIDI.channels[b],T=I.currentTime+(a+v+e.startDelay)/1e3,w=n-A+e.startDelay;switch(S.subtype){case"controller":MIDI.setController(b,S.controllerType,S.value,T);break;case"programChange":MIDI.programChange(b,S.programNumber,T);break;case"pitchBend":MIDI.pitchBend(b,S.value,T);break;case"noteOn":if(D.mute)break;p=S.noteNumber-(e.MIDIOffset||0);var x={event:S,time:w,source:MIDI.noteOn(b,S.noteNumber,S.velocity,T),interval:u(b,p,n+e.startDelay,A-v,144,S.velocity)};r.push(x),h++;break;case"noteOff":if(D.mute)break;p=S.noteNumber-(e.MIDIOffset||0);var x={event:S,time:w,source:MIDI.noteOff(b,S.noteNumber,T),interval:u(b,p,n,A-v,128,0)};r.push(x);break;default:}}}}d&&d(r)}},f=function(){var n=s();for(e.playing=!1,e.restart+=1e3*(n.currentTime-o);r.length;){var t=r.pop();window.clearInterval(t.interval),t.source&&("number"==typeof t.source?window.clearTimeout(t.source):t.source.disconnect(0))}for(var u in a){var t=a[u];144===a[u].message&&i&&i({channel:t.channel,note:t.note,now:t.now,end:t.end,message:128,velocity:t.velocity})}a={}}}(),MIDI===void 0)var MIDI={};if(MIDI.Soundfont===void 0&&(MIDI.Soundfont={}),function(e){"use strict";window.AudioContext=window.AudioContext||window.webkitAudioContext,e.DEBUG=!1,e.USE_XHR=!0,e.soundfontUrl="./soundfont/",e.loadPlugin=function(r){"function"==typeof r&&(r={callback:r}),e.soundfontUrl=r.soundfontUrl||e.soundfontUrl,e.audioDetect(function(o){var a=window.location.hash,i="";if(i=o[r.api]?r.api:o[a.substr(1)]?a.substr(1):o.webmidi?"webmidi":window.AudioContext?"webaudio":window.Audio?"audiotag":"flash",t[i]){if(r.targetFormat)var u=r.targetFormat;else var u=o["audio/ogg"]?"ogg":"mp3";e.lang=i,e.supports=o;var s=n(r);t[i](u,s,r)}})};var n=function(n){var t=n.instruments||n.instrument;"object"!=typeof t&&(t=t?[t]:[]);for(var r=0;t.length>r;r++){var o=t[r];"number"==typeof o&&(t[r]=e.GeneralMIDI.byId[o])}return t},t={};t.webmidi=function(n,t,r){e.loader&&e.loader.message("Web MIDI API..."),e.WebMIDI.connect(r)},t.flash=function(n,t,r){e.loader&&e.loader.message("Flash API..."),dom.loadScript.add({url:r.soundManagerUrl||"./inc/SoundManager2/script/soundmanager2.js",verify:"SoundManager",callback:function(){e.Flash.connect(t,r)}})},t.audiotag=function(n,t,o){e.loader&&e.loader.message("HTML5 Audio API..."),new Queue({items:t,progress:function(n){e.loader&&t.length&&e.loader.update(null,"Downloading...",100*n>>0)},next:function(e){r(this,e,n)},callback:function(){e.AudioTag.connect(o)}})},t.webaudio=function(n,t,o){e.loader&&e.loader.message("Web Audio API..."),new Queue({items:t,progress:function(n){e.loader&&t.length&&e.loader.update(null,"Downloading...",100*n>>0)},next:function(e){r(this,e,n)},callback:function(){e.WebAudio.connect(o)}})};var r=function(n,t,r){var i=e.soundfontUrl+t+"-"+r+".js";MIDI.Soundfont[t]?n.next():e.USE_XHR?dom.request({url:i,onprogress:a,onload:function(e){o({text:e.responseText}),n.next()}}):dom.loadScript.add({url:i,verify:"MIDI.Soundfont['"+t+"']",callback:function(){console.log(MIDI.Soundfont),n.next()}})},o=function(e){var n=document.createElement("script");n.language="javascript",n.type="text/javascript",e.text&&(n.text=e.text),e.src&&(n.src=e.src),document.body.appendChild(n)},a=function(n){this.totalSize||(this.totalSize=this.getResponseHeader("Content-Length-Raw")?parseInt(this.getResponseHeader("Content-Length-Raw")):n.total);var t=this.totalSize?Math.round(100*(n.loaded/this.totalSize)):"";e.loader&&e.loader.update(null,"Downloading...",t)}}(MIDI),function(){"use strict";var e=function(e){for(var n in e)MIDI[n]=e[n]};(function(){var n=null,t=null,r=MIDI.WebMIDI={api:"webmidi"};r.send=function(e,n){t.send(e,1e3*n)},r.setController=function(e,n,r,o){t.send([e,n,r],1e3*o)},r.setVolume=function(e,n,r){t.send([176+e,7,n],1e3*r)},r.programChange=function(e,n,r){t.send([192+e,n],1e3*r)},r.pitchBend=function(e,n,r){t.send([224+e,n],1e3*r)},r.noteOn=function(e,n,r,o){t.send([144+e,n,r],1e3*o)},r.noteOff=function(e,n,r){t.send([128+e,n,0],1e3*r)},r.chordOn=function(e,n,r,o){for(var a=0;n.length>a;a++){var i=n[a];t.send([144+e,i,r],1e3*o)}},r.chordOff=function(e,n,r){for(var o=0;n.length>o;o++){var a=n[o];t.send([128+e,a,0],1e3*r)}},r.stopAllNotes=function(){t.cancel();for(var e=0;16>e;e++)t.send([176+e,123,0])},r.connect=function(o){e(r),navigator.requestMIDIAccess().then(function(e){n=e,t=n.outputs()[0],MIDI.loader&&MIDI.loader.stop(),o.callback&&o.callback()},function(){o.api=window.AudioContext?"webaudio":window.Audio?"audiotag":"flash",MIDI.loadPlugin(o)})}})(),window.AudioContext&&function(){var n=function(e,n,t){if(r){var o=new Audio;o.src=e,o.controls=!1,o.autoplay=!1,o.preload=!1,o.addEventListener("canplay",function(){callback(o)}),o.addEventListener("error",function(e){console.log(e)}),document.body.appendChild(o)}else if(0===e.indexOf("data:audio")){var a=e.split(",")[1],i=Base64Binary.decodeArrayBuffer(a),u=MIDI.Player.ctx;u.decodeAudioData(i,n,t)}else{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=function(){var e=MIDI.Player.ctx;e.decodeAudioData(s.response,n,t)},s.send()}};new AudioContext;var t,r=!1,o=MIDI.WebAudio={api:"webaudio"},a={},i=127,u={},s=function(e,t,r,o,a,i){var s=MIDI.Soundfont[t];if(s.isLoaded)return i(t);var c=MIDI.GM.byName[t],l=c.number,d=r[o],f=MIDI.Soundfont[t][d];if(!f)return i(t);var p=function(e){console.log(e)},A=function(e){for(var n=d;3>n.length;)n+="&nbsp;";if(MIDI.loader!==void 0&&MIDI.loader.update(null,c.instrument+"<br>Processing: "+(100*(o/87)>>0)+"%<br>"+n),e.id=d,a[o]=e,a.length===r.length){for(;a.length;)if(e=a.pop()){var f=MIDI.keyToNote[e.id];u[l+""+f]=e}s.isLoaded=!0,i(t)}},h=s[d];n(h,A,p)};o.send=function(){},o.setController=function(){},o.setVolume=function(e,n,t){setTimeout(function(){i=n},t||0)},o.programChange=function(e,n,t){setTimeout(function(){var t=MIDI.channels[e];t.instrument=n},t||0)},o.pitchBend=function(e,n,t){setTimeout(function(){var t=MIDI.channels[e];t.pitchBend=n},t||0)},o.noteOn=function(e,n,s,c){var l=MIDI.getChannel(e),d=l.instrument,f=d+""+n,p=u[f];if(!p)return MIDI.DEBUG&&console.log("missing instrument",d,MIDI.GM.byId[d]),void 0;if(t.currentTime>c&&(c+=t.currentTime),r)var A=t.createMediaElementSource(p);else{var A=t.createBufferSource();A.buffer=p}o.ff&&A.connect(o.ff.input),a[e+""+n]=A,A.connect(t.destination),A.gainNode=t.createGain();var h=2*s/127*(i/127)-1;return A.gainNode.connect(t.destination),A.gainNode.gain.value=Math.min(1,Math.max(-1,h)),A.connect(A.gainNode),r?setTimeout(function(){p.currentTime=0,p.play()},1e3*(c||0)):A.noteOn?A.noteOn(c||0):A.start(c||0),A},o.noteOff=function(e,n,o){var i=MIDI.getChannel(e);if(i){var s=i.instrument,c=s+""+n,l=u[c];if(l){o=o||0,t.currentTime>o&&(o+=t.currentTime);var d=a[e+""+n];if(d){if(d.gainNode){var f=d.gainNode.gain;f.linearRampToValueAtTime(f.value,o),f.linearRampToValueAtTime(-1,o+.4)}r?setTimeout(function(){l.pause()},1e3*o):d.noteOff?d.noteOff(o+.5):d.stop(o+.5),delete a[e+""+n]}}}},o.chordOn=function(e,n,t,r){for(var a,i={},u=0,s=n.length;s>u;u++)i[a=n[u]]=o.noteOn(e,a,t,r);return i},o.chordOff=function(e,n,t){for(var r,a={},i=0,u=n.length;u>i;i++)a[r=n[i]]=o.noteOff(e,r,t);return a},o.stopAllNotes=function(){for(var e in a){var n=0;t.currentTime>n&&(n+=t.currentTime),a[e].gain.linearRampToValueAtTime(1,n),a[e].gain.linearRampToValueAtTime(0,n+.2),a[e].noteOff(n+.3),delete a[e]}},o.connect=function(n){e(o),null==MIDI.Player.ctx?MIDI.Player.ctx=t=new AudioContext:t=MIDI.Player.ctx,t.createScriptProcessor||(t.createScriptProcessor=t.createJavaScriptNode),t.createDelay||(t.createDelay=t.createDelayNode),t.createGain||(t.createGain=t.createGainNode);var r=[],a=MIDI.keyToNote;for(var i in a)r.push(i);var u=[],c={},l=function(e){delete c[e];for(var t in c)break;t||(MIDI.loader&&MIDI.loader.stop(),n.callback&&n.callback())};for(var d in MIDI.Soundfont){c[d]=!0;for(var f=0;r.length>f;f++)s(t,d,r,f,u,l)}u.length||l()}}(),window.Audio&&function(){for(var n=MIDI.AudioTag={api:"audiotag"},t={},r=127,o=-1,a=[],i=[],u={},s=0;12>s;s++)a[s]=new Audio;var c=function(e,n){if(MIDI.channels[e]){var t=MIDI.channels[e].instrument,s=MIDI.GM.byId[t].id,n=u[n];if(n){var c=s+""+n.id,l=(o+1)%a.length,d=a[l];if(i[l]=c,!MIDI.Soundfont[s])return MIDI.DEBUG&&console.log(s),void 0;d.src=MIDI.Soundfont[s][n.id],d.volume=r/127,d.play(),o=l}}},l=function(e,n){if(MIDI.channels[e]){var t=MIDI.channels[e].instrument,r=MIDI.GM.byId[t].id,n=u[n];if(n)for(var s=r+""+n.id,c=0;a.length>c;c++){var l=(c+o+1)%a.length,d=i[l];if(d&&d==s)return a[l].pause(),i[l]=null,void 0}}};n.send=function(){},n.setController=function(){},n.setVolume=function(e,n){r=n},n.programChange=function(e,n){MIDI.channels[e].instrument=n},n.pitchBend=function(){},n.noteOn=function(e,n,r,o){var a=t[n];if(u[a])return o?setTimeout(function(){c(e,a)},1e3*o):(c(e,a),void 0)},n.noteOff=function(){},n.chordOn=function(e,n,r,o){for(var a=0;n.length>a;a++){var i=n[a],s=t[i];if(u[s]){if(o)return setTimeout(function(){c(e,s)},1e3*o);c(e,s)}}},n.chordOff=function(e,n,r){for(var o=0;n.length>o;o++){var a=n[o],i=t[a];if(u[i]){if(r)return setTimeout(function(){l(e,i)},1e3*r);l(e,i)}}},n.stopAllNotes=function(){for(var e=0,n=a.length;n>e;e++)a[e].pause()},n.connect=function(r){for(var o in MIDI.keyToNote)t[MIDI.keyToNote[o]]=o,u[o]={id:o};e(n),MIDI.loader&&MIDI.loader.stop(),r.callback&&r.callback()}}(),function(){var n=MIDI.Flash={api:"flash"},t={},r={};n.send=function(){},n.setController=function(){},n.setVolume=function(){},n.programChange=function(e,n){MIDI.channels[e].instrument=n},n.pitchBend=function(){},n.noteOn=function(e,n,o,a){if(MIDI.channels[e]){var i=MIDI.channels[e].instrument,u=MIDI.GM.byId[i].number;if(n=u+""+t[n],r[n])return a?setTimeout(function(){r[n].play({volume:2*o})},1e3*a):(r[n].play({volume:2*o}),void 0)}},n.noteOff=function(){},n.chordOn=function(e,n,o){if(MIDI.channels[e]){var a=MIDI.channels[e].instrument,i=MIDI.GM.byId[a].number;for(var u in n){var s=n[u],c=i+""+t[s];r[c]&&r[c].play({volume:2*o})}}},n.chordOff=function(){},n.stopAllNotes=function(){},n.connect=function(o,a){soundManager.flashVersion=9,soundManager.useHTML5Audio=!0,soundManager.url=a.soundManagerSwfUrl||"../inc/SoundManager2/swf/",soundManager.useHighPerformance=!0,soundManager.wmode="transparent",soundManager.flashPollingInterval=1,soundManager.debugMode=!1,soundManager.onload=function(){for(var i=function(e,n,t){var o=MIDI.GM.byName[e],a=o.number;r[a+""+n]=soundManager.createSound({id:n,url:MIDI.soundfontUrl+e+"-mp3/"+n+".mp3",multiShot:!0,autoLoad:!0,onload:t})},u=[],s=88,c=o.length*s,l=0;o.length>l;l++)for(var d=o[l],f=function(){u.push(this.sID),void 0!==MIDI.loader&&MIDI.loader.update(null,"Processing: "+this.sID)},p=0;s>p;p++){var A=t[p+21];i(d,A,f)}e(n);var h=setInterval(function(){c>u.length||(clearInterval(h),MIDI.loader&&MIDI.loader.stop(),a.callback&&a.callback())},25)},soundManager.onerror=function(){};for(var i in MIDI.keyToNote)t[MIDI.keyToNote[i]]=i}}(),MIDI.GM=function(e){var n=function(e){return e.replace(/[^a-z0-9 ]/gi,"").replace(/[ ]/g,"_").toLowerCase()},t={byName:{},byId:{},byCategory:{}};for(var r in e)for(var o=e[r],a=0,i=o.length;i>a;a++){var u=o[a];if(u){var s=parseInt(u.substr(0,u.indexOf(" ")),10);u=u.replace(s+" ",""),t.byId[--s]=t.byName[n(u)]=t.byCategory[n(r)]={id:n(u),instrument:u,number:s,category:r}}}return t}({Piano:["1 Acoustic Grand Piano","2 Bright Acoustic Piano","3 Electric Grand Piano","4 Honky-tonk Piano","5 Electric Piano 1","6 Electric Piano 2","7 Harpsichord","8 Clavinet"],"Chromatic Percussion":["9 Celesta","10 Glockenspiel","11 Music Box","12 Vibraphone","13 Marimba","14 Xylophone","15 Tubular Bells","16 Dulcimer"],Organ:["17 Drawbar Organ","18 Percussive Organ","19 Rock Organ","20 Church Organ","21 Reed Organ","22 Accordion","23 Harmonica","24 Tango Accordion"],Guitar:["25 Acoustic Guitar (nylon)","26 Acoustic Guitar (steel)","27 Electric Guitar (jazz)","28 Electric Guitar (clean)","29 Electric Guitar (muted)","30 Overdriven Guitar","31 Distortion Guitar","32 Guitar Harmonics"],Bass:["33 Acoustic Bass","34 Electric Bass (finger)","35 Electric Bass (pick)","36 Fretless Bass","37 Slap Bass 1","38 Slap Bass 2","39 Synth Bass 1","40 Synth Bass 2"],Strings:["41 Violin","42 Viola","43 Cello","44 Contrabass","45 Tremolo Strings","46 Pizzicato Strings","47 Orchestral Harp","48 Timpani"],Ensemble:["49 String Ensemble 1","50 String Ensemble 2","51 Synth Strings 1","52 Synth Strings 2","53 Choir Aahs","54 Voice Oohs","55 Synth Choir","56 Orchestra Hit"],Brass:["57 Trumpet","58 Trombone","59 Tuba","60 Muted Trumpet","61 French Horn","62 Brass Section","63 Synth Brass 1","64 Synth Brass 2"],Reed:["65 Soprano Sax","66 Alto Sax","67 Tenor Sax","68 Baritone Sax","69 Oboe","70 English Horn","71 Bassoon","72 Clarinet"],Pipe:["73 Piccolo","74 Flute","75 Recorder","76 Pan Flute","77 Blown Bottle","78 Shakuhachi","79 Whistle","80 Ocarina"],"Synth Lead":["81 Lead 1 (square)","82 Lead 2 (sawtooth)","83 Lead 3 (calliope)","84 Lead 4 (chiff)","85 Lead 5 (charang)","86 Lead 6 (voice)","87 Lead 7 (fifths)","88 Lead 8 (bass + lead)"],"Synth Pad":["89 Pad 1 (new age)","90 Pad 2 (warm)","91 Pad 3 (polysynth)","92 Pad 4 (choir)","93 Pad 5 (bowed)","94 Pad 6 (metallic)","95 Pad 7 (halo)","96 Pad 8 (sweep)"],"Synth Effects":["97 FX 1 (rain)","98 FX 2 (soundtrack)","99 FX 3 (crystal)","100 FX 4 (atmosphere)","101 FX 5 (brightness)","102 FX 6 (goblins)","103 FX 7 (echoes)","104 FX 8 (sci-fi)"],Ethnic:["105 Sitar","106 Banjo","107 Shamisen","108 Koto","109 Kalimba","110 Bagpipe","111 Fiddle","112 Shanai"],Percussive:["113 Tinkle Bell","114 Agogo","115 Steel Drums","116 Woodblock","117 Taiko Drum","118 Melodic Tom","119 Synth Drum"],"Sound effects":["120 Reverse Cymbal","121 Guitar Fret Noise","122 Breath Noise","123 Seashore","124 Bird Tweet","125 Telephone Ring","126 Helicopter","127 Applause","128 Gunshot"]}),MIDI.getChannel=function(e){return MIDI.channels[e]},MIDI.getInstrument=function(e){var n=MIDI.getChannel(e);return n&&n.instrument},MIDI.getMono=function(e){var e=MIDI.getChannel(ch);return e&&e.mono},MIDI.getOmni=function(e){var e=MIDI.getChannel(ch);return e&&e.omni},MIDI.getSolo=function(e){var e=MIDI.getChannel(ch);return e&&e.solo},MIDI.channels=function(){for(var e={},n=0;16>n;n++)e[n]={instrument:n,pitchBend:0,mute:!1,mono:!1,omni:!1,solo:!1};return e}(),MIDI.pianoKeyOffset=21,MIDI.keyToNote={},MIDI.noteToKey={},function(){for(var e=21,n=108,t=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],r=e;n>=r;r++){var o=(r-12)/12>>0,a=t[r%12]+o;MIDI.keyToNote[a]=r,MIDI.noteToKey[r]=a}}()}(),dom===void 0)var dom={};if(function(e){"use strict";dom.request=function(n){if("undefined"==typeof XMLHttpRequest&&function(){for(var e=[function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=0;e.length>n;n++){try{e[n]()}catch(t){continue}break}XMLHttpRequest=e[n]}(),(new XMLHttpRequest).responseText===void 0){var t="<!-- IEBinaryToArray_ByteStr -->\r\n<script type='text/vbscript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = \"\"\r\n   End If\r\nEnd Function\r\n</script>\r\n";document.write(t),dom.request=function(e){function n(e){for(var n={},t=0;256>t;t++)for(var r=0;256>r;r++)n[String.fromCharCode(t+256*r)]=String.fromCharCode(t)+String.fromCharCode(r);var o=IEBinaryToArray_ByteStr(e),a=IEBinaryToArray_ByteStr_Last(e);return o.replace(/[\s\S]/g,function(e){return n[e]})+a}"string"==typeof e&&(e={url:e});var t=XMLHttpRequest();if(t.open(e.body?"POST":"GET",e.url,!0),t.overrideMimeType&&t.overrideMimeType("text/plain; charset=x-user-defined"),e.headers)for(var r in e.headers)t.setRequestHeader(r,e.headers[r]);else e.body&&t.setRequestHeader("Content-type","application/x-www-form-urlencoded");return e.responseType&&(t.responseType=e.responseType),e.onerror&&"onerror"in t&&(t.onerror=e.onerror),e.onprogress&&"onprogress"in t&&(t.onprogress=e.onprogress),t.onreadystatechange=function(r){4===t.readyState&&(200===t.status||304===t.status||0===t.status?(t.responseText=n(t.responseBody),e.onload&&e.onload(t)):e.onerror&&e.onerror(r,!1))},t.setRequestHeader("Accept-Charset","x-user-defined"),t.send(null),t}}else dom.request=function(n){"string"==typeof n&&(n={url:n});var t=new XMLHttpRequest;if(t.open(n.body?"POST":"GET",n.url,!0),t.overrideMimeType&&t.overrideMimeType("text/plain; charset=x-user-defined"),n.headers)for(var r in n.headers)t.setRequestHeader(r,n.headers[r]);else n.body&&t.setRequestHeader("Content-type","application/x-www-form-urlencoded");return n.responseType&&(t.responseType=n.responseType),n.onerror&&"onerror"in t&&(t.onerror=n.onerror),n.onprogress&&t.upload&&"onprogress"in t.upload&&(t.upload.onprogress=n.onprogress),t.onreadystatechange=function(r){4===t.readyState&&(200===t.status||304===t.status||0===t.status&&e.userAgent.cordova?n.onload&&n.onload(t):n.onerror&&n.onerror(r,!1))},t.send(n.body),t};dom.request(n)}}(dom),"undefined"!=typeof module&&module.exports&&(XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest,module.exports=dom.request),dom===void 0)var dom={};(function(){"use strict";dom.loadScript=function(){return this.loaded={},this.loading={},this},dom.loadScript.prototype.add=function(n){var t=this;"string"==typeof n&&(n={url:n});var r=n.urls;r===void 0&&(r=[{url:n.url,verify:n.verify}]);var o=document.getElementsByTagName("head")[0],a=function(n,r){t.loaded[n.url]||r&&e(r)===!1||(t.loaded[n.url]=!0,t.loading[n.url]&&t.loading[n.url](),delete t.loading[n.url],n.callback&&n.callback(),f!==void 0&&f())},i=!1,u=[],s=function(e){if("string"==typeof e&&(e={url:e,verify:n.verify}),/([\w\d.\[\]\'\"])$/.test(e.verify)){var r=e.test=e.verify;if("object"==typeof r)for(var s=0;r.length>s;s++)u.push(r[s]);else u.push(r)}if(!t.loaded[e.url]){var l=document.createElement("script");l.onreadystatechange=function(){("loaded"===this.readyState||"complete"===this.readyState)&&a(e)},l.onload=function(){a(e)},l.onerror=function(){if(i=!0,delete t.loading[e.url],"object"==typeof e.test)for(var n in e.test)c(e.test[n]);else c(e.test)},l.setAttribute("type","text/javascript"),l.setAttribute("src",e.url),o.appendChild(l),t.loading[e.url]=function(){}}},c=function(e){for(var n=[],t=0;u.length>t;t++)u[t]!==e&&n.push(u[t]);u=n},l=function(t){if(t)a(t,t.test);else for(var o=0;r.length>o;o++)a(r[o],r[o].test);for(var s=!0,o=0;u.length>o;o++)e(u[o])===!1&&(s=!1);!n.strictOrder&&s?i?n.error&&n.error():n.callback&&n.callback():setTimeout(function(){l(t)},10)};if(n.strictOrder){var d=-1,f=function(){if(d++,r[d]){var e=r[d],o=e.url;t.loading[o]?t.loading[o]=function(){e.callback&&e.callback(),f()}:t.loaded[o]?f():(s(e),l(e))}else i?n.error&&n.error():n.callback&&n.callback()};f()}else for(var d=0;r.length>d;d++)s(r[d]),l(r[d])},dom.loadScript=new dom.loadScript;var e=function(e,n){try{e=e.split('"').join("").split("'").join("").split("]").join("").split("[").join(".");for(var t=e.split("."),r=t.length,o=n||window,a=0;r>a;a++){var i=t[a];if(null==o[i])return!1;o=o[i]}return!0}catch(u){return!1}}})(),"undefined"!=typeof module&&module.exports&&(module.exports=dom.loadScript);var Queue=function(e){var n=this,t=e.oncomplete||e.complete||e.callback,r=e.onprogress||e.progress,o=e.flatten===!1?!1:!0;return this.canceled=!1,this.cancel=function(){n.canceled||0>=n.remaining||(e.oncancel&&e.oncancel(),n.canceled=!0)},this.next=function(){if(!n.canceled){var a=n.queue,i=n.remaining,u=n.length,s=u-i-1,c=n.keys[s];if(r&&r(u?1-(i+1)/u:1),!a.length)return t&&t(),void 0;n.remaining--;var l="[object Object]"==f+"",d=l&&f.length;if(o)e.next.call(n,a.shift(),c,s);else{var f=a[0];l&&!d&&a.shift(),l&&d?e.next.call(n,f.shift(),c,s):e.next.call(n,a.shift(),c,s)}}},this.reset=function(n){if(e.range)for(var t=e.range,r=t.from,n=[];t.to>=r;r++)n.push(r);else n=n||e.items;this.length=0,this.remaining=-1,this.queue=[],this.keys=[];for(var a in n)if(n.hasOwnProperty(a))if("[object Object]"!=n[a]+""||o)this.keys.push(a),this.queue.push(n[a]),this.length++,this.remaining++;else{var i=[];this.queue.push(i);for(var u in n[a])n[a].hasOwnProperty(u)&&(i.push(n[a][u]),this.keys.push(u),this.length++,this.remaining++)}},this.reset(),this.next(),this};(function(e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.btoa||(e.btoa=function(e){e=escape(e);var t,r,o,a,i,u="",s="",c="",l=0;do t=e.charCodeAt(l++),r=e.charCodeAt(l++),s=e.charCodeAt(l++),o=t>>2,a=(3&t)<<4|r>>4,i=(15&r)<<2|s>>6,c=63&s,isNaN(r)?i=c=64:isNaN(s)&&(c=64),u=u+n.charAt(o)+n.charAt(a)+n.charAt(i)+n.charAt(c),t=r=s="",o=a=i=c="";while(e.length>l);return u}),e.atob||(e.atob=function(e){var t,r,o,a,i,u="",s="",c="",l=0,d=/[^A-Za-z0-9\+\/\=]/g;d.exec(e)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do o=n.indexOf(e.charAt(l++)),a=n.indexOf(e.charAt(l++)),i=n.indexOf(e.charAt(l++)),c=n.indexOf(e.charAt(l++)),t=o<<2|a>>4,r=(15&a)<<4|i>>2,s=(3&i)<<6|c,u+=String.fromCharCode(t),64!=i&&(u+=String.fromCharCode(r)),64!=c&&(u+=String.fromCharCode(s)),t=r=s="",o=a=i=c="";while(e.length>l);return unescape(u)})})(this);var Base64Binary={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(e){var n=Math.ceil(3*e.length/4),t=new ArrayBuffer(n);return this.decode(e,t),t},decode:function(e,n){var t=this._keyStr.indexOf(e.charAt(e.length-1)),r=this._keyStr.indexOf(e.charAt(e.length-1)),o=Math.ceil(3*e.length/4);64==t&&o--,64==r&&o--;var a,i,u,s,c,l,d,f,p=0,A=0;for(a=n?new Uint8Array(n):new Uint8Array(o),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),p=0;o>p;p+=3)c=this._keyStr.indexOf(e.charAt(A++)),l=this._keyStr.indexOf(e.charAt(A++)),d=this._keyStr.indexOf(e.charAt(A++)),f=this._keyStr.indexOf(e.charAt(A++)),i=c<<2|l>>4,u=(15&l)<<4|d>>2,s=(3&d)<<6|f,a[p]=i,64!=d&&(a[p+1]=u),64!=f&&(a[p+2]=s);return a}};